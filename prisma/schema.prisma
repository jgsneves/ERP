generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum DocumentoTipo {
  CONTRATO_SOCIAL
  NOTA_FISCAL
  TFF
  DAS
}

model Documentos {
  Id               String           @id() @db.Uuid
  Nome             String
  Tipo             DocumentoTipo
  Url              String

  CriadoEm        DateTime         @db.Timestamptz(6)
  ModificadoEm    DateTime?        @db.Timestamptz(6)

  PessoaId         String?          @db.Uuid
  Pessoa           Pessoas?         @relation(fields: [PessoaId], references: [Id])

  EmpresaMedicaId  String?          @db.Uuid
  EmpresaMedica    EmpresasMedicas? @relation(fields: [EmpresaMedicaId], references: [Id])
}

enum TipoChavePix {
  CPF
  TELEFONE
  EMAIL
  HASH
}

model ContasCorrente {
  Id               String             @id() @db.Uuid
  Agencia          Int
  AgenciaDigito    Int
  Conta            Int
  ContaDigito      Int
  CodigoBanco      Int
  ChavePix         String?
  TipoChavePix     TipoChavePix?
  CriadoEm         DateTime           @db.Timestamptz(6)
  ModificadoEm     DateTime?          @db.Timestamptz(6)

  Titular          Pessoas?
  TitularId        String?            @db.Uuid @unique

  EmpresaTitular   EmpresasMedicas?
  EmpresaTitularId String?            @unique @db.Uuid
}

model EmpresasMedicas {
  Id              String           @id() @db.Uuid
  RazaoSocial     String
  Cnpj            String
  CriadoEm        DateTime         @db.Timestamptz(6)
  ModificadoEm    DateTime?        @db.Timestamptz(6)

  Endereco        Enderecos?       @relation(fields: [EnderecoId], references: [Id])
  EnderecoId      String?          @unique @db.Uuid

  ContaCorrenteId String?          @unique @db.Uuid
  ContasCorrente  ContasCorrente?  @relation(fields: [ContaCorrenteId], references: [Id])

  Socios          Pessoas[]

  Documentos      Documentos[]
}

model Enderecos {
  Id              String            @id() @db.Uuid
  Cep             String
  Logradouro      String
  Complemento     String
  Bairro          String
  Cidade          String
  Estado          String
  CriadoEm        DateTime          @db.Timestamptz(6)
  ModificadoEm    DateTime?         @db.Timestamptz(6)

  EmpresaMedica   EmpresasMedicas?
  EmpresaMedicaId String?           @unique @db.Uuid

  Pessoa          Pessoas?
  PessoaId        String?           @unique @db.Uuid
}

enum PessoasTipo {
  SOCIO
  EMPREGADO
  MEDICO
}

enum StatusAdmissao {
  EMPREGADO
  DEMITIDO
}

model Pessoas {
  Id              String           @id() @db.Uuid
  Nome            String
  Cpf             String
  DataNascimento  DateTime         @db.Timestamptz(6)
  CriadoEm        DateTime         @db.Timestamptz(6)
  ModificadoEm    DateTime?        @db.Timestamptz(6)
  Tipo            PessoasTipo

  ContaCorrenteId String?          @unique @db.Uuid
  ContasCorrente  ContasCorrente?  @relation(fields: [ContaCorrenteId], references: [Id])

  EnderecoId      String?          @unique @db.Uuid
  Endereco        Enderecos?       @relation(fields: [EnderecoId], references: [Id])

  Documentos      Documentos[]

  //Tipo: Médico
  Crm             String?
  EmpresaMedicaId String?          @db.Uuid
  EmpresaMedica   EmpresasMedicas? @relation(fields: [EmpresaMedicaId], references: [Id])

  //Tipo: Sócio
  Participacao    Float?           @db.Real

  //Tipo: Empregado
  Salario         Float?
  StatusAdmissao  StatusAdmissao?
}
