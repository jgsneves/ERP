generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TipoChavePix {
  CPF
  TELEFONE
  EMAIL
  HASH
}

model ContasCorrente {
  Id            String        @id() @db.Uuid
  Agencia       Int
  AgenciaDigito Int
  Conta         Int
  ContaDigito   Int
  CodigoBanco   Int
  ChavePix      String?
  TipoChavePix  TipoChavePix?
  CriadoEm      DateTime      @db.Timestamptz(6)
  ModificadoEm  DateTime?     @db.Timestamptz(6)

  Titular Pessoas?
  TitularId String? @db.Uuid @unique
}

model EmpresasMedicas {
  Id           String    @id() @db.Uuid
  Cnpj         String
  CriadoEm     DateTime  @db.Timestamptz(6)
  ModificadoEm DateTime? @db.Timestamptz(6)

  Endereco   Enderecos @relation(fields: [EnderecoId], references: [Id])
  EnderecoId String    @unique @db.Uuid

  Socios Pessoas[]
}

model Enderecos {
  Id           String    @id() @db.Uuid
  Cep          String
  Logradouro   String
  Complemento  String
  Bairro       String
  Cidade       String
  Estado       String
  CriadoEm     DateTime  @db.Timestamptz(6)
  ModificadoEm DateTime? @db.Timestamptz(6)

  EmpresaMedica EmpresasMedicas?
  Pessoa        Pessoas?
}

enum PessoasTipo {
  SOCIO
  EMPREGADO
  MEDICO
}

model Pessoas {
  Id             String      @id() @db.Uuid
  Nome           String
  Cpf            String
  DataNascimento DateTime    @db.Timestamptz(6)
  CriadoEm       DateTime    @db.Timestamptz(6)
  ModificadoEm   DateTime?   @db.Timestamptz(6)
  Tipo           PessoasTipo

  ContaCorrenteId String?         @unique @db.Uuid
  ContasCorrente  ContasCorrente? @relation(fields: [ContaCorrenteId], references: [Id])

  EnderecoId String?    @unique @db.Uuid
  Endereco   Enderecos? @relation(fields: [EnderecoId], references: [Id])

  //Tipo: Médico
  Crm             String?
  EmpresaMedicaId String?          @db.Uuid
  EmpresaMedica   EmpresasMedicas? @relation(fields: [EmpresaMedicaId], references: [Id])

  //Tipo: Sócio
  Participacao Float? @db.Real

  //Tipo: Empregado
  Salario        Float?
  StatusAdmissao Int?
}
